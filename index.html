<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/webapp-postmessage/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React + TS</title>
    <script type="module" crossorigin src="/webapp-postmessage/assets/index-cPTMYx2C.js"></script>
    <link rel="stylesheet" crossorigin href="/webapp-postmessage/assets/index-DXmCL0Sq.css">
  </head>
  <body>
    <div id="root"></div>
  </body>
  <script>
    function brridgePrinterGetInfo() {
      try {
        // alert("get Printer Info!");
        if (window.Joseph && typeof window.Joseph.printerStatus === 'function') {
          window.Joseph.printerStatus();
          // window.postMessage(JSON.stringify({ message: `Clicked fn: Joseph.printerStats()` }));
        }
      } catch (err) {
        window.postMessage(JSON.stringify({ error: true, message: `Unable to get print info!`, err }));
      }
    }
    function brridgePrinterPrint(params) {
      try {
        // alert("print!");
        console.log(`<<SEND>>::${JSON.stringify(params)}`);
        if (window.Joseph && typeof window.Joseph.handleCommand === 'function') window.Joseph.handleCommand(JSON.stringify(params));
      } catch (err) {
        window.postMessage(JSON.stringify({ error: true, message: `Unable to connect to printer!` }));
      }
    }
    function brridgeEvent(param) {
      try {
        window.postMessage(param);
      } catch (err) {
        window.postMessage(JSON.stringify({ error: true, message: `Unable to parse event!` }));
      }
    }
    // window.Joseph = {
    //   printerStatus: () => {
    //     brridgeEvent(JSON.stringify({ printerModel: 'abc' }))
    //   }
    // }
  </script>
</html>
